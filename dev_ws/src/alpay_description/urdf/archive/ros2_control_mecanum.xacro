<?xml version="1.0"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:property name="mecanum_wheel_min_speed" value="-0.4" />
  <xacro:property name="mecanum_wheel_max_speed" value="0.4" />

  <ros2_control name="gultepesystem" type="system">
    <!-- this is for the mecanum drive -->
    <hardware>
      <plugin>mecanum_pico/mecanumpicohal</plugin>
      <param name="front_left_wheel_joint">front_left_wheel_joint</param>
      <param name="front_right_wheel_joint">front_right_wheel_joint</param>
      <param name="rear_left_wheel_joint">rear_left_wheel_joint</param>
      <param name="rear_right_wheel_joint">rear_right_wheel_joint</param>
      
      <param name="loop_rate">30</param>
      <param name="device">/dev/pico_motor_controller</param>
      <param name="baud_rate">57600</param>
      <param name="timeout">10</param>
      <param name="enc_counts_per_rev">10000</param>
    </hardware>

    <!-- this is for the omni odom -->
    <hardware>
      <plugin>nfr_odom/nfrodompicohal</plugin>
      <param name="left_omni_joint">left_omni_joint</param>
      <param name="rigth_omni_joint">right_omni_joint</param>
      <param name="rear_omni_joint">rear_omni_joint</param>
      
      <param name="loop_rate">30</param>
      <param name="device">/dev/pico_omni_odom</param>
      <param name="baud_rate">57600</param>
      <param name="timeout">10</param>
      <param name="enc_counts_per_rev">10000</param>
    </hardware>

   
    <!-- mecanum drive joints -->
    <joint name="front_left_wheel_joint">
      <command_interface name="velocity">
        <param name="min">${mecanum_wheel_min_speed}</param>
        <param name="max">${mecanum_wheel_max_speed}</param>
      </command_interface>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>

    <joint name="front_right_wheel_joint">
      <command_interface name="velocity">
        <param name="min">${mecanum_wheel_min_speed}</param>
        <param name="max">${mecanum_wheel_max_speed}</param>
      </command_interface>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>

    <joint name="rear_left_wheel_joint">
      <command_interface name="velocity">
        <param name="min">${mecanum_wheel_min_speed}</param>
        <param name="max">${mecanum_wheel_max_speed}</param>
      </command_interface>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>

    <joint name="rear_right_wheel_joint">
      <command_interface name="velocity">
        <param name="min">${mecanum_wheel_min_speed}</param>
        <param name="max">${mecanum_wheel_max_speed}</param>
      </command_interface>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>

    <!-- omni odometry joints -->
    <joint name="right_omni_joint">
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>

    <joint name="left_omni_joint">
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>

    <joint name="rear_omni_joint">
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>

  </ros2_control>

</robot>