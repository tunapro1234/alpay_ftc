<?xml version="1.0"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

    <xacro:property name="_nfr__roller_friction_mu" value="1"/>
    <xacro:property name="_nfr__roller_friction_mu2" value="1"/>

    <xacro:macro name="nfr_omni_wheel" params="link_name xyz rpy">
        <link name="${link_name}">
            <visual>
                <geometry>
                    <cylinder radius="0.035" length="0.03"/>
                </geometry>
                <material name="_nfr__black"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <!-- not necessary, we are sorrounded by rollers anyway -->
            <!-- <collision>
                <geometry>
                    <cylinder radius="0.035" length="0.0375"/>
                </geometry>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </collision> -->
            <xacro:_nfr__cylinder_inertia m="0.180" r="0.042" l="0.0375" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Black</material>
            </gazebo>
        </link>

        <link name="${link_name}_roller0">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller0_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller0"/>
            <origin xyz="0.043 0 0" rpy="1.57 0 0"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller1">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller1_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller1"/>
            <origin xyz="0.03723 0.0215 0" rpy="0.85 0 0.5234"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller2">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller2_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller2"/>
            <origin xyz="0.0215 0.03723 0" rpy="0.85 0 1.04868"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller3">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller3_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller3"/>
            <origin xyz="0 0.043 0" rpy="0.85 0 1.57"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller4">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller4_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller4"/>
            <origin xyz="-0.0215 0.03723 0" rpy="0.85 0 2.0934"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller5">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller5_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller5"/>
            <origin xyz="-0.03723 0.0215 0" rpy="0.85 0 2.6167"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller6">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller6_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller6"/>
            <origin xyz="-0.043 0 0" rpy="0.85 0 3.14"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller7">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller7_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller7"/>
            <origin xyz="-0.03723 -0.0215 0" rpy="0.85 0 3.6634"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller8">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller8_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller8"/>
            <origin xyz="-0.0215 -0.03723 0" rpy="0.85 0 4.1867"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller9">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller9_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller9"/>
            <origin xyz="0 -0.043 0" rpy="0.85 0 4.71"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller10">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller10_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller10"/>
            <origin xyz="0.0215 -0.03723 0" rpy="0.85 0 5.234"/>
            <axis xyz="0 0 1"/>
        </joint>

        <link name="${link_name}_roller11">
            <visual>
                <geometry>
                    <cylinder radius="0.007" length="0.03"/>
                </geometry>
                <material name="_nfr__blue"/>
                <origin xyz="${xyz}" rpy="${rpy}"/>
            </visual>
            <xacro:_nfr__cylinder_inertia m="0.006" r="0.007" l="0.03" xyz="${xyz}" rpy="${rpy}"/>
            <gazebo>
                <material>Gazebo/Blue</material>
                <mu>${_nfr__roller_friction_mu}</mu>
                <mu2>${_nfr__roller_friction_mu2}</mu2>
                <surface>
                    <friction>
                        <ode>
                            <mu>${_nfr__roller_friction_mu}</mu>
                            <mu2>${_nfr__roller_friction_mu2}</mu2>
                        </ode>
                    </friction>
                </surface>
            </gazebo>
        </link>
        <joint name="${link_name}_roller11_joint" type="continuous">
            <parent link="${link_name}"/>
            <child link="${link_name}_roller11"/>
            <origin xyz="0.03723 -0.0215 0" rpy="0.85 0 5.7567"/>
            <axis xyz="0 0 1"/>
        </joint>

    </xacro:macro>

</robot>